<!DOCTYPE html>
<html lang="en" ng-app="myModule5"><!--3、ng-app="myModule5"启动ng并调用模块-->
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="../css/bootstrap.css">
<title>全选/取消全选</title>
</head>
<body>
<div class="container" ng-controller="myCtrl5"><!--4、ng-controller="myCtrl5"启用控制器-->
<h2>全选和取消全选</h2>

<section>
<pre>{{choseArr}}</pre>
全选: <input type="checkbox" ng-model="master" ng-click="all(master,tesarry)">
<div ng-repeat="z in tesarry">
<input id={{z}} type="checkbox" ng-model="x" ng-checked="master" ng-click="chk(z,x)">{{z}}
</div>
<a href="#" class="btn btn-danger" ng-click="delete()" > 删除</a>
</section>
</div>















<script src="../js/angular.js"></script><!--1、引入angularJS-->
<script>
//2、创建自定义模块和控制器
angular.module('myModule5', ['ng']).
controller('myCtrl5', function($scope){
	$scope.tesarry=['1','2','3','4','5'];//初始化数据
	
	$scope.choseArr=[];//定义数组用于存放前端显示
	var str="";//
	var flag=false;//是否点击了全选，是为a
	$scope.x=false;//默认未选中
	$scope.all= function (c,v) {//全选
	if(!c){
	$scope.x=true;
	$scope.choseArr=v;
	}else{
	$scope.x=false;
	$scope.choseArr=[""];
	}
	flag=true;
	};
	$scope.chk= function (z,x) {//单选或者多选
	if(flag) {//在全选的基础上操作
	str = $scope.choseArr.join(',') + ',';
	}
	if (x == true) {//选中
	str = str + z + ',';
	} else {
	str = str.replace(z + ',', '');//取消选中
	}
	$scope.choseArr=(str.substr(0,str.length-1)).split(',');
	};
	$scope.delete= function () {// 操作CURD
	if($scope.choseArr[0]==""||$scope.choseArr.length==0){//没有选择一个的时候提示
	alert("请至少选中一条数据在操作！")
	return;
	};
	for(var i=0;i<$scope.choseArr.length;i++){
	//alert($scope.choseArr[i]);
	console.log($scope.choseArr[i]);//遍历选中的id
	}
	};
});
</script>
</body>
</html>